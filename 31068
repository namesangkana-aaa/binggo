<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <title>Online Bingo with Friends</title>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    #board { display: grid; grid-template-columns: repeat(5, 60px); gap: 5px; margin-top: 20px; }
    .cell { width: 60px; height: 60px; display: flex; align-items: center; justify-content: center; border: 1px solid #888; cursor: pointer; }
    .marked { background: lightgreen; }
    #called { margin-top: 20px; }
    #chat { border: 1px solid #ccc; height: 150px; overflow-y: auto; padding: 5px; margin-top: 10px; }
  </style>
</head>
<body>
  <h1>üéâ Bingo Online</h1>
  <div id="login">
    <input id="nameInput" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠" />
    <button onclick="joinGame()">‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°</button>
  </div>

  <div id="game" style="display:none;">
    <h3>‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö <span id="playerName"></span></h3>
    <button onclick="callNumber()">üé≤ ‡∏™‡∏∏‡πà‡∏°‡πÄ‡∏•‡∏Ç</button>
    <div id="called"><b>‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏Å:</b> <span id="calledList"></span></div>

    <div id="board"></div>

    <h3>üí¨ ‡πÅ‡∏ä‡∏ó</h3>
    <div id="chat"></div>
    <input id="msgInput" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°..." />
    <button onclick="sendMessage()">‡∏™‡πà‡∏á</button>
  </div>

<script>
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyDL1jGst3QztrYCIWC3jBzrFkJTA47tOtE",
  authDomain: "ganggang-4db0e.firebaseapp.com",
  projectId: "ganggang-4db0e",
  storageBucket: "ganggang-4db0e.firebasestorage.app",
  messagingSenderId: "852511853125",
  appId: "1:852511853125:web:a796c7325d3f88821ef12c",
  measurementId: "G-CHDPG991DT"
};
  const firebaseConfig = {
    apiKey: "YOUR_API_KEY",
    authDomain: "YOUR_PROJECT.firebaseapp.com",
    databaseURL: "https://YOUR_PROJECT.firebaseio.com",
    projectId: "YOUR_PROJECT",
    storageBucket: "YOUR_PROJECT.appspot.com",
    messagingSenderId: "SENDER_ID",
    appId: "APP_ID"
  };
  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();

  let playerName = "";
  let board = [];

  function joinGame() {
    playerName = document.getElementById("nameInput").value || "Player";
    document.getElementById("playerName").innerText = playerName;
    document.getElementById("login").style.display = "none";
    document.getElementById("game").style.display = "block";
    generateBoard();
    listenDatabase();
  }

  function generateBoard() {
    const nums = Array.from({length: 25}, (_, i) => i + 1);
    nums.sort(() => Math.random() - 0.5);
    board = nums.slice(0, 25);
    const boardDiv = document.getElementById("board");
    boardDiv.innerHTML = "";
    board.forEach(num => {
      const cell = document.createElement("div");
      cell.className = "cell";
      cell.innerText = num;
      cell.onclick = () => cell.classList.toggle("marked");
      boardDiv.appendChild(cell);
    });
  }

  function callNumber() {
    const num = Math.floor(Math.random() * 75) + 1;
    db.ref("calledNumbers").push(num);
  }

  function sendMessage() {
    const msg = document.getElementById("msgInput").value;
    if(msg.trim() !== "") {
      db.ref("chat").push({ user: playerName, text: msg });
      document.getElementById("msgInput").value = "";
    }
  }

  function listenDatabase() {
    db.ref("calledNumbers").on("value", snapshot => {
      const data = snapshot.val() || {};
      const numbers = Object.values(data);
      document.getElementById("calledList").innerText = numbers.join(", ");
    });

    db.ref("chat").on("child_added", snapshot => {
      const {user, text} = snapshot.val();
      const chatDiv = document.getElementById("chat");
      chatDiv.innerHTML += `<p><b>${user}:</b> ${text}</p>`;
      chatDiv.scrollTop = chatDiv.scrollHeight;
    });
  }
</script>
</body>
</html>
